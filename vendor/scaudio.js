module.exports=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){function n(){return this._hooksPause.every(function(t){return t.call()})}function r(t){var e=t.resource_id||t.id||t.cid;if(!e)throw new Error("Your model should have a unique `id`, `cid` or `resource_id` property");return e}function o(t){C=t,t&&(x.AudioManagerStates=t.States)}function s(){var t=V();return g.call(this,!0).done(function(e){t.resolve(e.url)}).fail(function(){t.reject()}),t.promise()}function a(t){var e,i=this.options;return e={id:this.getId(),src:t.url,duration:z.result(i.duration),title:this.options.title,mimeType:t.mimeType,forceSingle:i.useSinglePlayer},C.createAudioPlayer(e,{streamUrlProvider:s.bind(this)})}function u(t,e){var i=e?"on":"off";t[i]("state-change",L,this)[i]("position-change",c,this)[i]("metadata",l,this)}function l(){this.trigger(G.METADATA)}function c(){this._prevPosition!==this.currentTime()&&(this.trigger(G.TIME),this._prevPosition=this.currentTime())}function h(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function f(){h.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(G.RESET))}function d(){this._registerPlays=!0,this.pause(),this.trigger(G.FINISH)}function g(t){var e=V(),i=this.streamInfo&&!t;return i?e.resolve(this.streamInfo):p.call(this).done(function(t){var i=X.choosePreferredStream(t,this.options);i?e.resolve(i):(this.trigger(G.NO_PROTOCOL),F.warn("(%s) Could not match a protocol of given media descriptor to one of the supported protocols (%s), aborting attempt to play.",this.getId(),this.options.protocols),e.reject())}.bind(this)).fail(function(t){F.warn("(%s) Stream request failed with status: %d",this.getId(),t.status),m.call(this,t),v.call(this,t),e.reject()}.bind(this)),e.promise()}function p(){if(this.options.streamUrls&&!this._usedPrefetchUrls){var t,e=V();return this._usedPrefetchUrls=!0,t=z.result(this.options.streamUrls),e.resolve(t),e.promise()}return this.ajax({type:"GET",url:z.result(this.options.streamUrlsEndpoint),dataType:"json",async:this.options.asyncFetch,timeout:this.options.asyncFetch?it:et})}function m(t){var e=t.status>=400&&-1!==(t.responseText||"").indexOf("geo_blocked");e&&this.trigger(G.GEO_BLOCKED)}function v(t){0===t.status&&this.trigger(G.NO_CONNECTION)}function T(){return this.controller&&this.controller.getCapabilities&&this.controller.getCapabilities()?this.controller.getCapabilities().needsUrlRefresh:!0}function _(t){if(!T.call(this))return!0;var e=this._initAudioDefer&&this._initAudioDefer.state(),i=X.streamValidForPlayingFrom(this.streamInfo,t);return this.controller&&this.controller.hasStreamUrlProvider&&this.controller.hasStreamUrlProvider()?!0:e&&("pending"===e||"resolved"===e&&i)}function A(t){t&&!this._bufferingTimeout?this._bufferingTimeout=window.setTimeout(function(){this._isBuffering=!0,this.trigger(G.BUFFERRING_START)}.bind(this),nt):t||(this._bufferingTimeout&&(window.clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(G.BUFFERRING_END)))}function E(){this.off(G.TIME,this.seekTimeEventHandler),this.trigger(G.SEEKED),this.seekTimeEventHandler=null}function y(){this._errorRecoveryFlagsResetTimeout=window.setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),at)}function S(){this._errorRecoveryFlagsResetTimeout&&window.clearTimeout(this._errorRecoveryFlagsResetTimeout)}function P(){var t=this.isPlaying(),e=Date.now();return S.call(this),this._errorRecoveryTime&&this._errorRecoveryTime+ot>e&&this._errorRecoveryCounts>st?void this.trigger(G.AUDIO_ERROR,this):(this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,f.call(this),void(t&&this.play({seek:this.currentTime(),userInitiated:!1})))}function w(t){this.logAudioError({error_code:t,protocol:this.streamInfo?this.streamInfo.protocol:void 0,player_type:this.controller?this.controller.getType():void 0,host:this.streamInfo?q.getUrlHost(this.streamInfo.url):void 0,url:this.streamInfo?this.streamInfo.url:void 0})}function b(){var t,e=C.Errors;if(!this.controller)return F.error("(%s) Controller is null, aborting error handler.",this.getId(),this),w.call(this,null),void P.call(this);switch(t=this.controller&&this.controller.getErrorID(),F.error("(%s) %s",this.getId(),this.controller.getErrorMessage?this.controller.getErrorMessage():"Controller does not provide getErrorMessage()"),D(t,"MSE","GENERIC","HTML5_AUDIO_DECODE","HTML5_AUDIO_SRC_NOT_SUPPORTED","FLASH_PROXY","FLASH_RTMP_CONNECT_FAILED","FLASH_RTMP_CANNOT_PLAY_STREAM")&&w.call(this,t),t){case e.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(G.FLASH_NOT_LOADED);break;case e.FLASH_PROXY_FLASH_BLOCKED:this.trigger(G.FLASH_BLOCK);break;case e.FLASH_RTMP_CONNECT_FAILED:z.without(this.options.protocols,Q.RTMP);case e.FLASH_RTMP_CANNOT_PLAY_STREAM:case e.FLASH_RTMP_CONNECT_CLOSED:case e.HTML5_AUDIO_NETWORK:case e.HTML5_AUDIO_ABORTED:case e.HTML5_AUDIO_DECODE:case e.HTML5_AUDIO_SRC_NOT_SUPPORTED:case e.GENERIC_AUDIO_ENDED_EARLY:case e.MSE_BAD_OBJECT_STATE:case e.MSE_NOT_SUPPORTED:case e.MSE_MP3_NOT_SUPPORTED:case e.MSE_HLS_NOT_VALID_PLAYLIST:case e.MSE_HLS_PLAYLIST_NOT_FOUND:case e.MSE_HLS_SEGMENT_NOT_FOUND:P.call(this);break;case e.GENERIC_AUDIO_OVERRUN:d.call(this);break;default:F.error("(%s) Unhandled audio error code: %s",this.getId(),t,this)}}function O(t,e){switch(this.options.debug&&I.call(this,t,e),t){case G.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case G.PLAY:var i=e;this.toggleMute(Z.muted),this.setVolume(Z.volume),this._isPlaying=!1,this._isPlayActionQueued=!0,this._userInitiatedPlay=void 0!==i.userInitiated?!!i.userInitiated:!0,N.call(this);break;case G.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case G.BUFFERRING_START:case G.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case G.BUFFERRING_END:case G.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1);break;case G.NO_CONNECTION:this._hasNoConnection=!0,this._noConnectionSince=Date.now();break;case G.NO_STREAMS:this.pause(),A.call(this,!1),h.call(this),M.call(this);break;case G.STREAMS:this._noConnectionSince=null,this._hasNoConnection=!1;break;case G.ONLINE:k.call(this);break;case G.OFFLINE:}}function L(t){var e=C.States,i=C.Errors;switch(t){case e.IDLE:R.call(this),this.controller&&this.controller.getErrorID()===i.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(G.FLASH_UNBLOCK);break;case e.PAUSED:R.call(this),A.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&E.call(this),this.isPlaying()&&this.trigger(G.PAUSE,{position:this.currentTime()});break;case e.PLAYING:R.call(this),A.call(this,!1),y.call(this),this.trigger(G.PLAY_RESUME);break;case e.LOADING:case e.SEEKING:R.call(this),A.call(this,!0);break;case e.ENDED:R.call(this),d.call(this);break;case e.ERROR:A.call(this,!1),b.call(this)}this.trigger(G.STATE_CHANGE,t)}function I(t,e){var i=this.options.title;i=i&&i.length?" ["+i.replace(/\s/g,"").substr(0,6)+"]":"",t===G.STATE_CHANGE?F("(%s)%s Event: %s (%s)",this.getId(),i,t,e):t!==G.TIME||this._loggedTime?t!==G.TIME&&F("(%s)%s Event: %s",this.getId(),i,t):F("(%s)%s Event: %s %dms",this.getId(),i,t,this.currentTime()),this._loggedTime=t===G.TIME}function R(){this._initAudioDefer&&this._initAudioDefer.resolve()}function D(t){return void 0===C.Errors[t]?!1:Array.prototype.slice.call(arguments,1).some(function(e){return 0===t.indexOf(e)})}function N(){function t(){var t=window.navigator.onLine;F("Navigator `onLine` status is now: "+t),window.setTimeout(function(){window.navigator.onLine===t&&this.trigger(t?G.ONLINE:G.OFFLINE)}.bind(this),500)}this._onlineEventsRegistered||(this._onlineEventsRegistered=!0,window.addEventListener("online",t.bind(this)),window.addEventListener("offline",t.bind(this)))}function k(){if(this.hasNoConnection()&&this._isPlayRetryQueued){var t=Date.now()-this._noConnectionSince;this._isPlayRetryQueued=!0,t<this.options.retryAfterNoConnectionEventTimeout&&this.play({userInitiated:!1})}}function M(){this.hasNoConnection()&&!this._userInitiatedPlay&&(this._isPlayRetryQueued=!0)}var x,C,F,H=i(1),U=i(6),j=i(8),B=i(9),V=i(2).Deferred,G=i(7),Y=i(14),K=i(10),Q=i(15),W=i(16),X=i(18),q=i(12),z=i(13),J=i(19),$={},Z={muted:!1,volume:1},tt={soundId:$,duration:$,title:null,registerEndpoint:$,streamUrlsEndpoint:$,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[Q.HLS,Q.RTMP,Q.HTTP],extensions:[Y.MP3],maxBitrate:1/0,mediaSourceEnabled:!1,mseFirefox:!1,mseSafari:!1,eventLogger:null,logErrors:!0,logPerformance:!0,ajax:null,retryAfterNoConnectionEventTimeout:6e4,fadeOutOnPause:!1,fadeOutAlgo:J.VolumeAutomator.Algos.EaseInOut},et=6e3,it=6e3,nt=400,rt=6e4,ot=6e3,st=3,at=3e4,ut=[];x=t.exports=function(t,e){if(1===arguments.length?e=t:x.setAudioManager(t),!C)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=z.extend({},tt,e);var i=Object.keys(this.options).filter(function(t){return this.options[t]===$},this);if(i.length)throw new Error("SCAudio: pass into constructor the following options: "+i.join(", "));W.prioritizeAndFilter(this.options),this.controller=null,this.streamInfo=null,this._userInitiatedPlay=this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._onlineEventsRegistered=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=this._hasNoConnection=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=this._noConnectionSince=null,this.options.debug&&(this._loggedTime=!1),this._modelListeners={},this._hooksPause=[],this.audioPerfMonitor=new j(this,this.logAudioPerformance.bind(this)),this.audioLogger=new U(this),this.volumeAutomator=new J.VolumeAutomator(this),F=F||B(e.debug,"scaudio")},z.extend(x.prototype,K,{constructor:x,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=V(),g.call(this).done(function(t){var e=!0;this.streamInfo&&(e=!1),this.streamInfo=t,e&&this.trigger(G.STREAMS),this.controller=a.call(this,t),u.call(this,this.controller,!0),L.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(G.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(G.CREATED)}.bind(this))),this._initAudioDefer.promise()},registerPlay:function(){var t=this.options.soundId,e=!1;return-1===ut.indexOf(t)&&(ut.push(t),window.setTimeout(function(){var e=ut.indexOf(t);e>-1&&ut.splice(e,1)},rt),this.ajax({type:"POST",url:z.result(this.options.registerEndpoint),dataType:"json"}),this._registerCounts++,this._registerPlays=!1,this.trigger(G.REGISTERED),e=!0),e},toggle:function(){this[this.isPaused()?"play":"pause"]()},play:function(t){var e;if(t&&null!=t.seek)e=t.seek;else{if(this.isPlaying())return;e=this.currentTime()}t=z.extend({},t,{position:e}),this.trigger(G.PLAY,t),_.call(this,e)||(f.call(this),this._isPlayActionQueued=!0),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(G.PLAY_START,t),this.controller&&this.controller.play(e))}.bind(this)),A.call(this,!0)},pause:function(t){this.isPaused()||(t=z.extend({},t,{position:this.currentTime()}),n.call(this)&&(this.trigger(G.PAUSE,t),this.controller&&this.controller.pause()))},registerHook:function(t,e){switch(t){case"pause":this._hooksPause.push(e);break;default:throw new Error("can`t register hook for "+t)}},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,z.without(ut,this.options.soundId),window.clearTimeout(this._bufferingTimeout),h.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(G.DESTROYED),this.off()},seek:function(t){return this.controller?t>=z.result(this.options.duration)?void d.call(this):(this.seekTimeEventHandler&&this.off(G.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=z.after(2,function(){E.call(this)}.bind(this)),this.on(G.TIME,this.seekTimeEventHandler),this.trigger(G.SEEK,{from:this.currentTime(),to:t}),this.isPlaying()&&!_.call(this,t)?(f.call(this),void this.play({seek:t})):void this.controller.seek(t)):void 0},seekRelative:function(t){this.controller&&this.seek(this.currentTime()+t)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var t=0;return this.controller&&(t=this.controller.getLoadedPosition()/this.controller.getDuration(),t=t>=.99?1:t),t},buffered:function(){return this.controller&&this.controller.getDuration()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!(!this.controller||this.controller.getState()!==C.States.LOADING)},hasNoConnection:function(){return!!this._hasNoConnection},hasStreamInfo:function(){return!!this.streamInfo},toggleMute:function(t){x.toggleMute(t)},isMuted:function(){return x.isMuted()},setVolume:function(t){x.setVolume(t)},getVolume:function(){return x.getVolume()},logAudioPerformance:function(t){this.getEventLogger()&&this.options.logPerformance&&this.getEventLogger().audioPerformance(t)},logAudioError:function(t){this.getEventLogger()&&this.options.logErrors&&this.getEventLogger().audioError(t)},getAudioManagerStates:function(){return C.States},getId:function(){return this.options.resourceId||this.options.soundId},getEventLogger:function(){return this.options.eventLogger},registerModelEventListener:function(t,e){var i=r(t);if(this._modelListeners[i])throw new Error("Data model is already registered (forgot to unregister it or registering twice?)");this._modelListeners[i]=e=e.bind(this,t),this.on("all",e)},unregisterModelEventListener:function(t){var e=r(t);this._modelListeners[e]&&(this.off("all",this._modelListeners[e]),delete this._modelListeners[e])},ajax:function(t){return this.options.ajax?this.options.ajax(t):H(t)},trigger:function(t,e){O.call(this,t,e),K.trigger.call(this,t,e)}}),z.extend(x,{getSettings:function(){return Z},setSettings:function(t){z.extend(Z,t)},setAudioManager:o,setAudioManagerOnce:z.once(o),toggleMute:function(t){Z.muted=void 0===t?!Z.muted:!!t,C&&C.setVolume(Z.muted?0:1)},isMuted:function(){return Z.muted},setVolume:function(t){Z.volume=void 0===t?1:t,C&&C.setVolume(Z.volume)},getVolume:function(){return Z.volume},Extensions:Y,Protocols:Q,Events:G,BUFFER_DELAY:nt,PLAY_REGISTRATION_TIMEOUT:rt})},function(t,e,i){var n=i(2).Deferred,r=4;t.exports=function(t){var e,i,o,s,a,u,l,c;t&&(o=t.data||null,i=t.url||"",e=t.type||"GET",s=t.dataType||"text",a=t.async,u=t.timeout,l=t.beforeSend||null);var h=n();a=a!==!1;var f=new XMLHttpRequest;return f.open(e,i,a),a&&(f.responseType="text"),l&&l(f),f.onreadystatechange=function(){if(f.readyState===r)if(clearTimeout(c),0!==f.status&&f.status<400){var t=f.responseText;if("json"===s)try{t=JSON.parse(t)}catch(e){return void h.reject(f)}h.resolve(t)}else h.reject(f)},null!=u&&(c=setTimeout(function(){f.readyState!==r&&(f.abort(),h.reject(f))},u)),f.send(o),h.promise()}},function(t,e,i){t.exports=i(3)},function(t,e,i){/*!
	* jquery-deferred
	* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
	* MIT Licensed
	*/
var n=t.exports=i(4),r=Array.prototype.slice;n.extend({Deferred:function(t){var e=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n.Deferred(function(i){n.each(e,function(e,r){var s=r[0],a=t[e];o[r[1]](n.isFunction(a)?function(){var t=a.apply(this,arguments);t&&n.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s+"With"](this===o?i:this,[t])}:i[s])}),t=null}).promise()},promise:function(t){return null!=t?n.extend(t,r):r}},o={};return r.pipe=r.then,n.each(e,function(t,n){var s=n[2],a=n[3];r[n[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[n[0]]=s.fire,o[n[0]+"With"]=s.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,o,s=0,a=r.call(arguments),u=a.length,l=1!==u||t&&n.isFunction(t.promise)?u:0,c=1===l?t:n.Deferred(),h=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?r.call(arguments):o,n===e?c.notifyWith(i,n):--l||c.resolveWith(i,n)}};if(u>1)for(e=new Array(u),i=new Array(u),o=new Array(u);u>s;s++)a[s]&&n.isFunction(a[s].promise)?a[s].promise().done(h(s,o,a)).fail(c.reject).progress(h(s,i,e)):--l;return l||c.resolveWith(o,a),c.promise()}})},function(t,e,i){function n(t){var e=s[t]={};return r.each(t.split(o),function(t,i){e[i]=!0}),e}var r=t.exports=i(5),o=/\s+/,s={};r.Callbacks=function(t){t="string"==typeof t?s[t]||n(t):r.extend({},t);var e,i,o,a,u,l,c=[],h=!t.once&&[],f=function(n){for(e=t.memory&&n,i=!0,l=a||0,a=0,u=c.length,o=!0;c&&u>l;l++)if(c[l].apply(n[0],n[1])===!1&&t.stopOnFalse){e=!1;break}o=!1,c&&(h?h.length&&f(h.shift()):e?c=[]:d.disable())},d={add:function(){if(c){var i=c.length;!function n(e){r.each(e,function(e,i){var o=r.type(i);"function"===o?t.unique&&d.has(i)||c.push(i):i&&i.length&&"string"!==o&&n(i)})}(arguments),o?u=c.length:e&&(a=i,f(e))}return this},remove:function(){return c&&r.each(arguments,function(t,e){for(var i;(i=r.inArray(e,c,i))>-1;)c.splice(i,1),o&&(u>=i&&u--,l>=i&&l--)}),this},has:function(t){return r.inArray(t,c)>-1},empty:function(){return c=[],this},disable:function(){return c=h=e=void 0,this},disabled:function(){return!c},lock:function(){return h=void 0,e||d.disable(),this},locked:function(){return!h},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!c||i&&!h||(o?h.push(e):f(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d}},function(t,e){function i(t){return null==t?String(t):c[l.call(t)]||"object"}function n(t){return"function"===u.type(t)}function r(t){return"array"===u.type(t)}function o(t,e,i){var r,o=0,s=t.length,a=void 0===s||n(t);if(i)if(a){for(r in t)if(e.apply(t[r],i)===!1)break}else for(;s>o&&e.apply(t[o++],i)!==!1;);else if(a){for(r in t)if(e.call(t[r],r,t[r])===!1)break}else for(;s>o&&e.call(t[o],o,t[o++])!==!1;);return t}function s(t){return t&&"object"===u.type(t)?!0:!1}function a(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||u.isFunction(s)||(s={}),l===a&&(s=this,--a);l>a;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],n=t[e],s!==n&&(c&&n&&(u.isPlainObject(n)||(r=u.isArray(n)))?(r?(r=!1,o=i&&u.isArray(i)?i:[]):o=i&&u.isPlainObject(i)?i:{},s[e]=u.extend(c,o,n)):void 0!==n&&(s[e]=n));return s}var u=t.exports={type:i,isArray:r,isFunction:n,isPlainObject:s,each:o,extend:a,noop:function(){}},l=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){c["[object "+t+"]"]=t.toLowerCase()})},function(t,e,i){function n(t){this.listenTime+=t.from-this.currentTime,this.currentTime=t.to}function r(t){this.listenTime+=t.position-this.currentTime,this.currentTime=t.position}function o(t){this.currentTime=t.position}var s,a=i(7);s=t.exports=function(t){this.scAudio=t,this.listenTime=0,this.currentTime=0,this.scAudio.on(a.SEEK,n,this).on(a.PLAY_START,o,this).on(a.PAUSE,r,this)},s.prototype={constructor:s,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}},function(t,e){var i={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",REGISTERED:"registered",ONLINE:"online",OFFLINE:"offline"};t.exports=i},function(t,e,i){function n(){return this.scAudio.controller?this.controller?void v.warn("(%s) Setup was called while it was already initialized (returned with a no-op)",this.scAudio.getId()):(v("(%s) Initialized",this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,void(this.host=E.getUrlHost(this.scAudio.streamInfo.url))):void v.warn("Can´t initialize when controller is null")}function r(){this.controller&&(v("(%s) Reset",this.scAudio.getId()),this.controller=this.protocol=this.host=null,this.timeToPlayMeasured=!1)}function o(t){var e=this.scAudio.getAudioManagerStates();t===e.LOADING?this.timeToPlayMeasured&&f.call(this):y.isNull(this.bufferingStartTime)||d.call(this)}function s(){this.metadataLoadStartTime=Date.now()}function a(){return y.isNull(this.metadataLoadStartTime)?void v.warn("(%s) onMetadataEnd was called without onMetadataStart being called before.",this.scAudio.getId()):(this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),void(this.metadataLoadStartTime=null))}function u(){this.playClickTime=Date.now()}function l(){if(!this.timeToPlayMeasured){if(y.isNull(this.playClickTime))return void v.warn("(%s) onPlayResume was called without onPlayStart being called before.",this.scAudio.getId());this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}}function c(){this.scAudio.isPaused()||(this.seekStartTime=Date.now())}function h(){if(!this.scAudio.isPaused()){if(y.isNull(this.seekStartTime))return void v.warn("(%s) onSeekEnd was called without onSeekStart being called before.",this.scAudio.getId());this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}}function f(){this.bufferingStartTime||(this.bufferingStartTime=Date.now())}function d(){return y.isNull(this.bufferingStartTime)?void v.warn("(%s) onBufferingEnd was called without onBufferingStart being called before.",this.scAudio.getId()):(g.call(this),void(this.bufferingStartTime=null))}function g(){y.isNull(this.bufferingStartTime)||(y.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function p(){g.call(this),y.isNull(this.bufferingTimeAccumulated)||(this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null)}var m,v,T=i(9),_=i(7),A=i(10),E=i(12),y=i(13);m=t.exports=function(t,e){this.scAudio=t,this.logFn=e,this.controller=null,this.reset(),v=v||T(t.options.debug,"audioperf"),t.on(_.CREATED,n,this).on(_.RESET,r,this).on(_.DESTROYED,r,this).on(_.SEEK,c,this).on(_.SEEKED,h,this).on(_.PLAY,u,this).on(_.PLAY_START,s,this).on(_.PLAY_RESUME,l,this).on(_.PAUSE,p,this).on(_.FINISH,p,this).on(_.STATE_CHANGE,o,this).on(_.METADATA,a,this)},y.extend(m.prototype,A,{constructor:m,log:function(t){return this.controller?(y.extend(t,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),v("(%s) %s latency: %d protocol: %s host: %s playertype: %s",this.scAudio.getId(),t.type,t.latency,t.protocol,t.host,t.playertype),void this.logFn(t)):void v.warn("(%s) Monitor log was called while controller is null (returned with a no-op)",this.scAudio.getId())},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1}})},function(t,e){function i(){function t(t,i){for(var n,r=arguments.length,o=Array(r>2?r-2:0),s=2;r>s;s++)o[s-2]=arguments[s];"string"==typeof i?i=" "+i:(o.unshift(i),i=""),(n=window.console)[t].apply(n,[e()+" |"+c+"%c"+i].concat(h,o))}function e(){var t=new Date,e=null===l?0:t-l;return l=+t,"%c"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+"."+n(t.getMilliseconds(),"0",3)+"%c (%c"+n("+"+e+"ms"," ",8)+"%c)"}var i=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!i)return s;var l=null,c=a(o),h=["color: green","color: grey","color: blue","color: grey",u(o),""],f=t.bind(null,"log");return f.log=f,["info","warn","error"].forEach(function(e){f[e]=t.bind(null,e)}),f}function n(t,e,i){return o(e,i-(""+t).length)+t}function r(t){return n(t,"0",2)}function o(t,e){return e>0?new Array(e+1).join(t):""}function s(){}function a(t){return t?"%c"+t:"%c"}t.exports=i,s.log=s.info=s.warn=s.error=s;var u=function(){var t=["#51613C","#447848","#486E5F","#787444","#6E664E"],e=0;return function(i){return i?"background-color:"+t[e++%t.length]+";color:#fff;border-radius:3px;padding:2px 4px;font-family:sans-serif;text-transform:uppercase;font-size:9px;margin:0 4px":""}}()},function(t,e,i){t.exports=i(11)},function(t,e,i){!function(){function i(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,i=[];for(e in t)t.hasOwnProperty(e)&&(i[i.length]=e);return i},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,i){if(null!=t)if(r&&t.forEach===r)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,o=t.length;o>n;n++)e.call(i,t[n],n,t);else for(var s in t)this.has(t,s)&&e.call(i,t[s],s,t)},once:function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}}}}var n,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u=i();n={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var n=this,r=u.once(function(){n.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,i)},off:function(t,e,i){var n,r,o,s,a,l,h,f;if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,l=s.length;l>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=n=[],e||i)for(h=0,f=o.length;f>h;h++)r=o[h],(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context)&&n.push(r);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&h(i,e),n&&h(n,arguments),this},stopListening:function(t,e,i){var n=this._listeners;if(!n)return this;var r=!e&&!i;"object"==typeof e&&(i=this),t&&((n={})[t._listenerId]=t);for(var o in n)n[o].off(e,i,this),r&&delete this._listeners[o];return this}};var l=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)t[e].apply(t,[r,i[r]].concat(n));return!1}if(l.test(i)){for(var o=i.split(l),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(n));return!1}return!0},h=function(t,e){var i,n=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};u.each(f,function(t,e){n[e]=function(e,i,n){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[o]=e,"object"==typeof i&&(n=this),e[t](i,n,this),this}}),n.bind=n.on,n.unbind=n.off,n.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=n),e.BackboneEvents=n}(this)},function(t,e){var i={getUrlParams:function(t){var e={},i=t.indexOf("?");return i>-1&&t.substr(i+1).split("&").forEach(function(t){var i=t.split("=");e[i[0]]=i[1]}),e},getUrlHost:function(t){var e,i=t.split("//");return e=i[0]===t?i[0].split("/")[0]:i[1]?i[1].split("/")[0]:""}};t.exports=i},function(t,e){var i={extend:function(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){if(e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}),t},each:function(t,e,i){Object.keys(t).forEach(function(n){e.call(i||null,t[n],n)})},without:function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)},result:function(t){var e=t;return i.isFunction(e)&&(e=t()),e},isFunction:function(t){return"function"==typeof t},after:function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},isNull:function(t){return null===t},once:function(t){var e,i=!1;return function(){return i?e:(i=!0,void(e=t.apply(this,arguments)))}}};t.exports=i},function(t,e){var i={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"};t.exports=i},function(t,e){var i={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=i},function(t,e,i){function n(t){return l.supportsMediaSourceExtensions()&&t.mediaSourceEnabled&&(l.isChrome()&&l.getChromeVersion()>=35||l.isFirefox()&&t.mseFirefox||l.isSafari()&&t.mseSafari)}function r(t){return function(e){var i=!1;switch(e){case u.RTMP:i=l.supportsFlash();break;case u.HTTP:i=l.supportsHTML5Audio()||l.supportsFlash();break;case u.HLS:i=n(t)}return i}}function o(t){return l.isSafari()||l.isFirefox()?[u.HLS,u.HTTP,u.RTMP]:t}function s(t){t.protocols=o(t.protocols).filter(r(t))}var a,u=i(15),l=i(17);a={prioritizeAndFilter:s},t.exports=a},function(t,e){function i(t){return t.test(window.navigator.userAgent.toLowerCase())}function n(t,e){try{return window.navigator.userAgent.toLowerCase().match(t)[e]}catch(i){return null}}function r(){try{return parseInt(n(/chrom(e|ium)\/([0-9]+)\./,2),10)}catch(t){return NaN}}function o(){return!l()&&i(/safari/)}function s(){return o()&&i(/version\/7\.1/)}function a(){return o()&&i(/version\/8/)&&!i(/version\/80/)}function u(){return o()&&i(/version\/9\./)}function l(){return i(/chrom(e|ium)/)}function c(){return i(/firefox/)}function h(){return!!window.MediaSource&&(window.MediaSource.isTypeSupported("audio/mpeg")||window.MediaSource.isTypeSupported("audio/mp4"))}function f(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(t){return!1}}function d(){try{var t=o()&&i(/version\/5\.0/),e=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!t&&e}catch(n){return!1}}function g(){return m(p())>=T}function p(){var t,e,i,n;if("undefined"!=typeof window.ActiveXObject)try{n=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),n&&(t=n.GetVariable("$version"))}catch(r){t=null}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(i="application/x-shockwave-flash",e=window.navigator.mimeTypes,e&&e[i]&&e[i].enabledPlugin&&e[i].enabledPlugin.description&&(t=e[i].enabledPlugin.description));if(!!window.chrome){return false};return t}function m(t){if(!t)return 0;var e=t.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([e[0],e[1]].join("."))||0}var v,T=9;v={flashPlugin:p,isSafari:o,isSafari71:s,isSafari8:a,isSafari9:u,isChrome:l,getChromeVersion:r,isFirefox:c,supportsNativeHLSAudio:d,supportsHTML5Audio:f,supportsFlash:g,supportsMediaSourceExtensions:h},t.exports=v},function(t,e,i){function n(t){var e=f.getUrlHost(t);return g.every(function(t){return 0!==e.indexOf(t)})}function r(t,e){return!(t===c.HLS&&!n(e))}function o(t,e){if(!t)return!1;var i=t.issuedAt+s(t.protocol,t.duration);return a(t.protocol)?Date.now()+t.duration-(e||0)<i:Date.now()<i}function s(t,e){var i=a(t);return p+(i?h.result(e):0)}function a(t){return t===c.HTTP||t===c.HLS}function u(t,e){function i(t){return-1*t}function n(t,e){return Math.abs(e-v)-Math.abs(t-v)}var o,s,a,u,l,c,f,d,g,p,m={},v=e.maxBitrate,T=e.protocols,_=e.extensions;for(h.each(t,function(t,e){var i=e.split("_"),n=i[0],r=i[1],o=i[2];m[n]=m[n]||{},m[n][r]=m[n][r]||{},m[n][r][o]=t}),l=0,c=T.length;c>l;++l)for(u=T[l],d=0,g=_.length;g>d;++d)if(f=_[d],m[u]&&m[u][f]){if(o=Object.keys(m[u][f]).map(Number).sort(i),s=v===1/0,a=v===-(1/0),v=s||a?o[s?"pop":"shift"]():o.sort(n).pop(),p=m[u][f][v],!r(u,p))continue;return{url:p,bitrate:v,protocol:u,extension:f,issuedAt:Date.now(),duration:h.result(e.duration)}}return null}var l,c=i(15),h=i(13),f=i(12),d=.9,g=[],p=Math.floor(12e4*d);l={choosePreferredStream:u,streamValidForPlayingFrom:o},t.exports=l},function(t,e,i){var n,r,o=i(7),s=i(13),a={Linear:0,EaseOut:1,EaseInOut:2},u=600,l=25;t.exports=n={},n.VolumeAutomator=r=function(t){this.scAudio=t,this.fadeOutAlgo=this.scAudio.options.fadeOutAlgo,this.fadeOutTimer=null,this.initialVolume=void 0,this.scAudio.options.fadeOutOnPause&&r.isSupported()&&(this.scAudio.on(o.PLAY,this.onPlay,this),this.scAudio.registerHook("pause",this.hookPause.bind(this)))},n.VolumeAutomator.isSupported=function(){var t=new window.Audio,e=t.volume,i=0===e?1:e/2;return t.volume=i,t.volume===i},n.VolumeAutomator.Algos=a,s.extend(r.prototype,{fadeOutAndPause:function(){var t=Date.now(),e=function(){var i,n=(Date.now()-t)/u,r=this.initialVolume;if(n>=1)this.scAudio.controller&&this.scAudio.controller.pause(),this.cancelFadeout();else{switch(this.fadeOutAlgo){case a.Linear:i=r*(1-n);break;case a.EaseOut:i=r*(1/(10*(n+.1))-.05);break;case a.EaseInOut:default:i=r*(Math.cos(n*Math.PI)/2+.5)}this.scAudio.setVolume(i),window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=window.setTimeout(e,l)}}.bind(this);this.initialVolume=this.scAudio.getVolume(),e()},cancelFadeout:function(){this.fadeOutTimer&&(window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null,this.scAudio.setVolume(this.initialVolume),this.initialVolume=void 0)},hookPause:function(t){return this.fadeOutAndPause(),!1},onPlay:function(){this.cancelFadeout()}})}]);
